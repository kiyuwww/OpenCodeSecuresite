<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Elka Mods</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap');
        body { font-family: 'Montserrat', sans-serif; background-color: #000; color: #fff; }
        .custom-border { border: 1px solid #333; border-radius: 8px; transition: all 0.3s ease; }
        .custom-border:hover { border-color: #555; }
        .password-input { background: #111; border: 1px solid #333; }
        .note-card { background: #111; border: 1px solid #333; transition: all 0.3s ease; }
        .note-card:hover { border-color: #555; }
        .btn { background: #222; transition: all 0.3s ease; }
        .btn:hover { background: #333; }
    </style>
</head>
<body class="min-h-screen relative">
    <!-- Main Content -->
    <div id="main-content" class="min-h-screen flex flex-col justify-center items-center px-4 py-20">
        <h1 id="welcome-text" class="text-4xl md:text-6xl font-bold mb-10 text-center opacity-0">Welcome to Elka Mods</h1>
        <div id="secret-man" class="fixed top-5 right-5 cursor-pointer z-50">
            <i data-feather="user" class="w-10 h-10 text-white"></i>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="login-modal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 hidden">
        <div class="bg-black custom-border p-8 max-w-md w-full">
            <h2 class="text-2xl font-bold mb-6 text-center">Admin Login</h2>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2">Username</label>
                    <input type="text" id="username" class="w-full px-4 py-2 rounded password-input custom-border" placeholder="Enter username">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Password</label>
                    <input type="password" id="password" class="w-full px-4 py-2 rounded password-input custom-border" placeholder="Enter password">
                </div>
                <button id="login-btn" class="w-full btn text-white py-2 px-4 rounded">
                    Enter Secret Panel
                </button>
                <p id="login-error" class="text-red-500 text-sm text-center hidden">Invalid credentials!</p>
                <p id="login-block" class="text-yellow-500 text-sm text-center hidden">Too many failed attempts. Try again later.</p>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="admin-panel" class="min-h-screen hidden bg-black px-4 py-20">
        <div class="max-w-4xl mx-auto">
            <h1 id="admin-title" class="text-4xl md:text-6xl font-bold mb-10 text-center opacity-0">Admin Panel</h1>
            <div class="mt-12">
                <h2 class="text-2xl font-bold mb-6">Your Notes</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8" id="notes-container"></div>
                <div class="bg-black custom-border p-6">
                    <h3 class="text-xl font-bold mb-4">Add New Note</h3>
                    <div class="space-y-4">
                        <div><input type="text" id="note-title" class="w-full px-4 py-2 rounded bg-black custom-border" placeholder="Title"></div>
                        <div><textarea id="note-content" rows="4" class="w-full px-4 py-2 rounded bg-black custom-border" placeholder="Your note content..."></textarea></div>
                        <button id="add-note-btn" class="btn text-white py-2 px-6 rounded">Save Note</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

<script>
feather.replace();

(function(){
    const enc = new TextEncoder(), dec = new TextDecoder();

    const PLAINTEXT_USERNAME = "adminuser333";
    const PLAINTEXT_PASSWORD = "ADHBTN446L9K0";

    // --- COOKIE HELPERS ---
    function setCookie(name, value, minutes) {
        const expires = new Date(Date.now() + minutes * 60000).toUTCString();
        document.cookie = `${name}=${encodeURIComponent(value)}; expires=${expires}; path=/`;
    }
    function getCookie(name) {
        const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
        return match ? decodeURIComponent(match[2]) : null;
    }
    function deleteCookie(name) {
        document.cookie = name + '=; Max-Age=0; path=/';
    }

    // --- LOGIN STATE ---
    let failedAttempts = Number(localStorage.getItem("failedAttempts") || 0);
    let blockUntil = Number(localStorage.getItem("blockUntil") || 0);

    function isBlocked() {
        const now = Date.now();
        if (now < blockUntil) return true;
        if (blockUntil && now >= blockUntil) {
            localStorage.removeItem("blockUntil");
            localStorage.setItem("failedAttempts", "0");
        }
        return false;
    }

    function successfulLogin() {
        deleteCookie("blocked");
        localStorage.removeItem("failedAttempts");
        localStorage.removeItem("blockUntil");
        setCookie("loggedIn", "true", 60 * 24); // 24h remember
        enterAdminPanel();
    }

    function failedLogin() {
        failedAttempts++;
        localStorage.setItem("failedAttempts", failedAttempts);
        if (failedAttempts >= 3) {
            const lockUntil = Date.now() + 15 * 60 * 1000;
            localStorage.setItem("blockUntil", lockUntil);
            setCookie("blocked", "true", 15);
            document.getElementById("login-block").classList.remove("hidden");
            document.getElementById("login-error").classList.add("hidden");
        } else {
            document.getElementById("login-error").classList.remove("hidden");
        }
    }

    // --- UI ---
    document.addEventListener('DOMContentLoaded', () => {
        anime({targets: '#welcome-text', opacity: [0,1], translateY: [-100,0], duration:1500, easing:'easeOutExpo'});

        if (getCookie("loggedIn") === "true") {
            enterAdminPanel();
            return;
        }

        document.getElementById('secret-man').addEventListener('click', () => {
            document.getElementById('login-modal').classList.remove('hidden');
            anime({targets:'#login-modal', opacity:[0,1], duration:500});
        });

        document.getElementById('login-btn').addEventListener('click', () => {
            if (isBlocked() || getCookie("blocked") === "true") {
                document.getElementById("login-block").classList.remove("hidden");
                document.getElementById("login-error").classList.add("hidden");
                return;
            }

            const username = document.getElementById("username").value.trim();
            const password = document.getElementById("password").value.trim();

            if (username === PLAINTEXT_USERNAME && password === PLAINTEXT_PASSWORD) {
                successfulLogin();
            } else {
                failedLogin();
            }
        });

        // Notes section
        let notes = JSON.parse(localStorage.getItem('elka-notes')) || [];
        const renderNotes = () => {
            const container = document.getElementById('notes-container');
            container.innerHTML = '';
            notes.forEach((note, index) => {
                const div = document.createElement('div');
                div.className = 'note-card rounded-lg p-6';
                div.innerHTML = `
                    <h3 class="text-xl font-bold mb-2">${note.title}</h3>
                    <p class="text-gray-300 mb-4">${note.content}</p>
                    <button data-index="${index}" class="delete-note text-red-500 hover:text-red-400 transition">
                        <i data-feather="trash-2"></i>
                    </button>`;
                container.appendChild(div);
            });
            feather.replace();
            document.querySelectorAll('.delete-note').forEach(btn=>{
                btn.onclick = (e)=>{
                    const idx = Number(e.target.closest('button').dataset.index);
                    notes.splice(idx,1);
                    localStorage.setItem('elka-notes', JSON.stringify(notes));
                    renderNotes();
                }
            });
        };

        document.getElementById('add-note-btn').addEventListener('click', ()=>{
            const title=document.getElementById('note-title').value;
            const content=document.getElementById('note-content').value;
            if(title && content){
                notes.push({title,content});
                localStorage.setItem('elka-notes', JSON.stringify(notes));
                document.getElementById('note-title').value='';
                document.getElementById('note-content').value='';
                renderNotes();
            }
        });
        renderNotes();
    });

    function enterAdminPanel(){
        document.getElementById('login-modal').classList.add('hidden');
        document.getElementById('main-content').classList.add('hidden');
        document.getElementById('admin-panel').classList.remove('hidden');
        anime({
            targets:'#admin-title',
            opacity:[0,1],
            translateY:[-50,0],
            duration:1500,
            easing:'easeOutExpo'
        });
    }
})();
</script>
</body>
</html>
